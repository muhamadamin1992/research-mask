(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vue-currency-input"],{7912:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("vs-row",{attrs:{"vs-justify":"center"}},[e("vs-col",{attrs:{type:"flex","vs-justify":"center","vs-align":"center","vs-w":"6"}},[e("vs-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(" Vue Currency Input ")])]),e("vs-list",[e("vs-list-header",{attrs:{title:"Размеры"}}),e("vs-list-item",{attrs:{title:"Без сжатия 23.7кб"}}),e("vs-list-item",{attrs:{title:"С сжатием 13.38кб"}}),e("vs-list-item",{attrs:{title:"Gzip 4.55кб"}}),e("vs-list-header",{attrs:{title:"Минусы"}}),e("vs-list-item",{attrs:{title:"Собития change срабативает 2 раза вместо 1 ого"}}),e("vs-list-item",{attrs:{title:"Форматтирования не работает при вводе"}}),e("vs-list-item",{attrs:{title:"Разделитель нельзя заменит на точку когда разделитель для тисячи пустое строка"}}),e("vs-list-item",{attrs:{title:"При использвания как директива до первого\n          focus на input не сработывает форматирования"}}),e("vs-list-item",{attrs:{title:"Чтобы директиво правильно работало надо всегда обработать\n          число чтобы после точки было 2 число небольше и не меньше"}}),e("vs-list-item",[e("div",{attrs:{slot:"avatar"},slot:"avatar"},[e("input",{directives:[{name:"currency",rawName:"v-currency",value:{currency:null},expression:"{\n                currency: null,\n              }"},{name:"model",rawName:"v-model",value:t.value,expression:"value"}],domProps:{value:t.value},on:{input:[function(i){i.target.composing||(t.value=i.target.value)},t.input],change:t.change}})])])],1)],1)],1)],1)},r=[];
/**
 * Vue Currency Input 1.20.1
 * (c) 2018-2020 Matthias Stiller
 * @license MIT
 */
function o(t,i,e){var n=document.createEvent("CustomEvent");n.initCustomEvent(i,!0,!0,e),t.dispatchEvent(n)}var a=function(t,i,e){return i&&null!=t?Number(t.toFixed(e).split(".").join("")):t},u=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},s=function(t){return t.replace(/^0+(0$|[^0])/,"$1")},c=function(t,i){return(t.match(new RegExp(u(i),"g"))||[]).length},l=function(t,i){return t.substring(0,i.length)===i},m=function(t,i){return t.substring(0,t.indexOf(i))},g=[",",".","٫"],h=function(t){var i=t.currency,e=t.locale,n=t.precision,r=t.autoDecimalMode,o=t.valueAsInteger,a=new Intl.NumberFormat(e,"string"===typeof i?{currency:i,style:"currency"}:{minimumFractionDigits:1}),u=a.format(123456);this.locale=e,this.currency=i,this.digits=[0,1,2,3,4,5,6,7,8,9].map((function(t){return t.toLocaleString(e)})),this.decimalSymbol=c(u,this.digits[0])?u.substr(u.indexOf(this.digits[6])+1,1):void 0,this.groupingSymbol=u.substr(u.indexOf(this.digits[3])+1,1),this.minusSymbol=m(Number(-1).toLocaleString(e),this.digits[1]),void 0===this.decimalSymbol?this.minimumFractionDigits=this.maximumFractionDigits=0:"number"===typeof n?this.minimumFractionDigits=this.maximumFractionDigits=n:"object"!==typeof n||r||o?"string"===typeof i?(this.minimumFractionDigits=a.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=a.resolvedOptions().maximumFractionDigits):this.minimumFractionDigits=this.maximumFractionDigits=2:(this.minimumFractionDigits=n.min||0,this.maximumFractionDigits=void 0!==n.max?n.max:20),"string"===typeof i?(this.prefix=m(u,this.digits[1]),this.negativePrefix=m(a.format(-1),this.digits[1]),this.suffix=u.substring(u.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[6])+1)):(this.prefix=(i||{}).prefix||"",this.negativePrefix=""+this.minusSymbol+this.prefix,this.suffix=(i||{}).suffix||"")};h.prototype.parse=function(t){var i=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrencySymbol(t),t=this.stripMinusSymbol(t);var e=this.decimalSymbol?"("+u(this.decimalSymbol)+"\\d*)?":"",n=t.match(new RegExp("^"+this.integerPattern()+e+"$"));return n?Number((i?"-":"")+this.onlyDigits(n[1])+"."+this.onlyDigits(n[3]||"")):null},h.prototype.format=function(t,i){return void 0===i&&(i={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}),"string"===typeof this.currency?t.toLocaleString(this.locale,Object.assign({},{style:"currency",currency:this.currency},i)):this.insertCurrencySymbol(Math.abs(t).toLocaleString(this.locale,i),t<0||0===t&&1/t<0)},h.prototype.integerPattern=function(){return"(0|[1-9]\\d{0,2}("+u(this.groupingSymbol)+"?\\d{3})*)"},h.prototype.toFraction=function(t){return""+this.digits[0]+this.decimalSymbol+this.onlyLocaleDigits(t.substr(1)).substr(0,this.maximumFractionDigits)},h.prototype.isFractionIncomplete=function(t){return!!this.normalizeDigits(t).match(new RegExp("^"+this.integerPattern()+u(this.decimalSymbol)+"$"))},h.prototype.isNegative=function(t){return l(t,this.negativePrefix)||l(t.replace("-",this.minusSymbol),this.minusSymbol)},h.prototype.insertCurrencySymbol=function(t,i){return""+(i?this.negativePrefix:this.prefix)+t+this.suffix},h.prototype.stripMinusSymbol=function(t){return t.replace("-",this.minusSymbol).replace(this.minusSymbol,"")},h.prototype.stripCurrencySymbol=function(t){return t.replace(this.negativePrefix,"").replace(this.prefix,"").replace(this.suffix,"")},h.prototype.normalizeDecimalSymbol=function(t,i){var e=this;return g.forEach((function(n){t=t.substr(0,i)+t.substr(i).replace(n,e.decimalSymbol)})),t},h.prototype.normalizeDigits=function(t){return"0"!==this.digits[0]&&this.digits.forEach((function(i,e){t=t.replace(new RegExp(i,"g"),e)})),t},h.prototype.onlyDigits=function(t){return this.normalizeDigits(t).replace(/\D+/g,"")},h.prototype.onlyLocaleDigits=function(t){return t.replace(new RegExp("[^"+this.digits.join("")+"]*","g"),"")};var p={locale:void 0,currency:"EUR",valueAsInteger:!1,distractionFree:!0,precision:void 0,autoDecimalMode:!1,valueRange:void 0,allowNegative:!0},d=function(t,i){var e=Object.assign({},p,i),n=new h(e);return a(n.parse(t),e.valueAsInteger,n.maximumFractionDigits)},v=function(t,i){return o(t,"format",{value:i})},f=function(t,i){return t.setSelectionRange(i,i)},y=function(t,i,e,n,r){var o=n.prefix,a=n.suffix,u=n.decimalSymbol,s=n.maximumFractionDigits,l=n.groupingSymbol,m=i.indexOf(u)+1,g=i.length-e;return Math.abs(t.length-i.length)>1&&e<=m?t.indexOf(u)+1:t.substr(e,1)===l&&c(t,l)===c(i,l)+1?t.length-g-1:(!r.autoDecimalMode&&0!==m&&e>m&&n.onlyDigits(i.substr(m)).length-1===s&&(g-=1),r.distractionFree.hideCurrencySymbol?t.length-g:Math.max(t.length-Math.max(g,a.length),0===o.length?0:o.length+1))},b=function(t,i,e,n){var r=n;return i.distractionFree.hideCurrencySymbol&&(r-=t.prefix.length),i.distractionFree.hideGroupingSymbol&&(r-=c(e.substring(0,n),t.groupingSymbol)),Math.max(0,r)},F=function(t,i){if(t===i)return!0;if(!t||!i||"object"!==typeof t||"object"!==typeof i)return!1;var e=Object.keys(t);return e.length===Object.keys(i).length&&(!!e.every(Object.prototype.hasOwnProperty.bind(i))&&e.every((function(e){return F(t[e],i[e])})))},x=function(t){this.numberFormat=t};x.prototype.conformToMask=function(t,i){var e=this;void 0===i&&(i="");var n=this.numberFormat.isNegative(t),r=function(t){if(""===t&&n&&i!==e.numberFormat.negativePrefix)return"";if(e.numberFormat.maximumFractionDigits>0){if(e.numberFormat.isFractionIncomplete(t))return t;if(l(t,e.numberFormat.decimalSymbol))return e.numberFormat.toFraction(t)}return null},o=t;o=this.numberFormat.stripCurrencySymbol(o),o=this.numberFormat.stripMinusSymbol(o);var a=r(o);if(null!=a)return this.numberFormat.insertCurrencySymbol(a,n);var u=o.split(this.numberFormat.decimalSymbol),c=u[0],m=u.slice(1),g=s(this.numberFormat.onlyDigits(c)),h=this.numberFormat.onlyDigits(m.join("")).substr(0,this.numberFormat.maximumFractionDigits),p=m.length>0&&0===h.length,d=""===g&&n&&(i===t.slice(0,-1)||i!==this.numberFormat.negativePrefix);return p||d?i:g.match(/\d+/)?{numberValue:Number((n?"-":"")+g+"."+h),fractionDigits:h}:""};var D=function(t){this.numberFormat=t};D.prototype.conformToMask=function(t){if(""===t)return"";var i=this.numberFormat.isNegative(t),e=""===this.numberFormat.stripMinusSymbol(t)?-0:Number((i?"-":"")+s(this.numberFormat.onlyDigits(t)))/Math.pow(10,this.numberFormat.minimumFractionDigits);return{numberValue:e,fractionDigits:e.toFixed(this.numberFormat.minimumFractionDigits).slice(-this.numberFormat.minimumFractionDigits)}};var S=Math.pow(2,53)-1,$=function(t,i,e){var n=e.$CI_DEFAULT_OPTIONS,r="input"===t.tagName.toLowerCase()?t:t.querySelector("input");if(!r)throw new Error("No input element found");var o=Object.assign({},n||p,i),a=o.distractionFree,u=o.autoDecimalMode,s=o.valueRange;"boolean"===typeof a&&(o.distractionFree={hideCurrencySymbol:a,hideNegligibleDecimalDigits:a,hideGroupingSymbol:a}),o.valueRange=s?{min:void 0!==s.min?Math.max(s.min,-S):-S,max:void 0!==s.max?Math.min(s.max,S):S}:{min:-S,max:S},u?(o.distractionFree.hideNegligibleDecimalDigits=!1,r.setAttribute("inputmode","numeric")):r.setAttribute("inputmode","decimal");var c=new h(o);return r.$ci=Object.assign({},r.$ci||{numberValue:null},{options:o,numberMask:o.autoDecimalMode?new D(c):new x(c),currencyFormat:c}),r},w=function(t,i){return Math.min(Math.max(t,i.min),i.max)},O=function(t,i){var e=t.$ci,n=e.numberValue,r=e.currencyFormat,u=e.options;n=a(n,u.valueAsInteger,r.maximumFractionDigits),o(t,i,{numberValue:n})},M=function(t,i,e){void 0===e&&(e=!1);var n=t.$ci,r=n.currencyFormat,o=n.options;j(t,null!=i?r.format(w(i,o.valueRange)):null),(i!==t.$ci.numberValue||e)&&O(t,"change")},N=function(t,i,e){if(null!=i){var n=t.$ci,r=n.focus,o=n.decimalSymbolInsertedAt,a=n.options,u=n.numberMask,s=n.currencyFormat,c=n.previousConformedValue,l=a.allowNegative,m=a.distractionFree;void 0!==o&&(i=s.normalizeDecimalSymbol(i,o),t.$ci.decimalSymbolInserted=void 0);var g,h=u.conformToMask(i,c);if("object"===typeof h){var p=h.numberValue,d=h.fractionDigits,v=s.maximumFractionDigits,f=s.minimumFractionDigits;r&&(f=v),f=e?d.replace(/0+$/,"").length:Math.min(f,d.length),g=p>S?c:s.format(p,{useGrouping:!(r&&m.hideGroupingSymbol),minimumFractionDigits:f,maximumFractionDigits:v})}else g=h;l||(g=g.replace(s.negativePrefix,s.prefix)),r&&m.hideCurrencySymbol&&(g=g.replace(s.negativePrefix,s.minusSymbol).replace(s.prefix,"").replace(s.suffix,"")),t.value=g,t.$ci.numberValue=s.parse(t.value)}else t.value=t.$ci.numberValue=null;t.$ci.previousConformedValue=t.value},j=function(t,i,e){void 0===e&&(e=!1),N(t,i,e),O(t,"input")},E=function(t){t.addEventListener("input",(function(i){if(!i.detail){var e=t.value,n=t.selectionStart,r=t.$ci,o=r.currencyFormat,a=r.options;j(t,e),t.$ci.focus&&f(t,y(t.value,e,n,o,a))}}),{capture:!0}),t.addEventListener("keypress",(function(i){g.includes(i.key)&&(t.$ci.decimalSymbolInsertedAt=t.selectionStart)})),t.addEventListener("format",(function(i){var e=t.$ci,n=e.currencyFormat,r=e.options,o=e.numberValue,a=function(t){return r.valueAsInteger&&null!=t?t/Math.pow(10,n.maximumFractionDigits):t},u=a(i.detail.value);o!==u&&M(t,u)})),t.addEventListener("focus",(function(){t.$ci.focus=!0;var i=t.$ci.options.distractionFree,e=i.hideCurrencySymbol,n=i.hideGroupingSymbol,r=i.hideNegligibleDecimalDigits;(e||n||r)&&setTimeout((function(){var i=t.value,e=t.selectionStart,n=t.selectionEnd;i&&j(t,i,r),Math.abs(e-n)>0?t.setSelectionRange(0,t.value.length):f(t,b(t.$ci.currencyFormat,t.$ci.options,i,e))}))})),t.addEventListener("blur",(function(){t.$ci.focus=!1,t.$ci.numberValue&&M(t,t.$ci.numberValue)})),t.addEventListener("change",(function(i){i.detail||O(t,"change")}))},V={bind:function(t,i,e){var n=i.value,r=e.context,o=$(t,n,r);E(o),v(o,o.$ci.currencyFormat.parse(o.value))},componentUpdated:function(t,i,e){var n=i.value,r=i.oldValue,o=e.context;if(!F(n,r)){var a=$(t,n,o);M(a,a.$ci.numberValue,!0)}}},C={render:function(t){var i=this;return t("input",{directives:[{name:"currency",value:this.options}],on:Object.assign({},this.$listeners,{change:function(t){t.detail&&i.$emit("change",t.detail.numberValue)},input:function(t){t.detail&&i.value!==t.detail.numberValue&&i.$emit("input",t.detail.numberValue)}})})},directives:{currency:V},name:"CurrencyInput",props:{value:{type:Number,default:null},locale:{type:String,default:void 0},currency:{type:[String,Object],default:void 0},distractionFree:{type:[Boolean,Object],default:void 0},precision:{type:[Number,Object],default:void 0},autoDecimalMode:{type:Boolean,default:void 0},valueAsInteger:{type:Boolean,default:void 0},valueRange:{type:Object,default:void 0},allowNegative:{type:Boolean,default:void 0}},mounted:function(){this.setValue(this.value)},computed:{options:function(){var t=this,i=Object.assign({},this.$CI_DEFAULT_OPTIONS||p);return Object.keys(p).forEach((function(e){void 0!==t[e]&&(i[e]=t[e])})),i}},watch:{value:"setValue"},methods:{setValue:function(t){v(this.$el,t)}}},I={install:function(t,i){void 0===i&&(i={});var e=i.componentName;void 0===e&&(e=C.name);var n=i.directiveName;void 0===n&&(n="currency");var r=i.globalOptions;void 0===r&&(r={}),t.prototype.$CI_DEFAULT_OPTIONS=Object.assign({},p,r),t.component(e,C),t.directive(n,V),t.prototype.$parseCurrency=function(t,i){return void 0===i&&(i={}),d(t,Object.assign({},r,i))}}};"undefined"!==typeof window&&window.Vue&&window.Vue.use(I);var P={name:"Money",data:function(){return{value:9000.999999}},methods:{input:function(){console.log(this.value,"input")},change:function(){console.log("change")}},directives:{currency:V},mounted:function(){var t=this;setTimeout((function(){return console.log(t.value,"initied")}),1e3)}},L=P,A=e("2877"),R=Object(A["a"])(L,n,r,!1,null,null,null);i["default"]=R.exports}}]);
//# sourceMappingURL=vue-currency-input.a6a78486.js.map